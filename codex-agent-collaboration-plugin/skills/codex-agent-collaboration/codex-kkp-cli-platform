#!/usr/bin/env bash
# Platform detection script for codex-kkp-cli
# Outputs one of: macosx64, macosarm64, linuxx64, linuxarm64, mingwx64

set -e

# Detect OS
case "$(uname -s)" in
    Linux*)
        os="linux"
        ;;
    Darwin*)
        os="macos"
        ;;
    *)
        echo "Error: Unsupported operating system: $(uname -s)" >&2
        exit 1
        ;;
esac

# Detect architecture
case "$(uname -m)" in
    x86_64|amd64)
        arch="x64"
        ;;
    arm64|aarch64)
        arch="arm64"
        ;;
    *)
        echo "Error: Unsupported architecture: $(uname -m)" >&2
        exit 1
        ;;
esac

# Output platform identifier
echo "${os}${arch}"
